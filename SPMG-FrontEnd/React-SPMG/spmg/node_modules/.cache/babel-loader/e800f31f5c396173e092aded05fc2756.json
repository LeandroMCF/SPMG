{"ast":null,"code":"var _jsxFileName = \"D:\\\\Senai\\\\SPMG-HTML\\\\SPMG-FrontEnd\\\\React-SPMG\\\\spmg\\\\src\\\\Login\\\\login.js\";\nimport { Component } from 'react';\nimport axios from \"axios\";\nimport '../style/css/style.css';\nimport { parseJwt } from '../services/auth';\nimport Cabecalho from '../Cabecalho/cabecalho';\nimport { findByTestId } from '@testing-library/dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.efetuarLogin = event => {\n      event.preventDefault();\n      this.setState({\n        erroMensagem: '',\n        isLoading: true\n      });\n      fetch('http://localhost:5000/api/Login', {\n        method: 'POST',\n        body: JSON.stringify({\n          email: this.state.email,\n          senha: this.state.senha\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(resposta => {\n        if (resposta.status === 200) {\n          localStorage.setItem('usuario-token', resposta.data.token);\n          this.setState({\n            isLoading: false\n          });\n\n          switch (parseJwt().role) {\n            case '1':\n              this.props.history.push('/Adm');\n              break;\n\n            case '2':\n              this.props.history.push('/Medicos');\n              break;\n\n            case '3':\n              this.props.history.push('/Prontuario');\n              break;\n\n            default:\n              break;\n          }\n        }\n      }).catch(() => {\n        this.setState({\n          erroMensagem: 'Email ou senha incorretos',\n          isLoading: false\n        });\n      });\n    };\n\n    this.attCampos = campo => {\n      this.setState({\n        [campo.target.name]: campo.target.value\n      });\n    };\n\n    this.state = {\n      // email : 'adm@gmail.com',\n      // senha : 'adm123',\n      // email : 'helena.souza@spmedicalgroup.com.br',\n      // senha : 'HelenaS123',\n      email: 'fernando@gmail.com',\n      senha: 'Fernando123',\n      erroMensagem: '',\n      isLoading: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Cabecalho, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alinhemantoLogin\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"campo\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.efetuarLogin,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alinharCampo\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"alinharP\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"digitar email\",\n                name: \"email\",\n                onChange: this.attCampos,\n                value: this.state.email,\n                required: true,\n                type: \"email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"alinharP\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Senha\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"digitar senha\",\n                name: \"senha\",\n                onChange: this.attCampos,\n                value: this.state.senha,\n                required: true,\n                type: \"password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: 'red',\n                  textAlign: 'center'\n                },\n                children: this.state.erroMensagem\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 37\n              }, this), this.state.isLoading === true && /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"botaoLogin\",\n                disabled: true,\n                children: \"Loading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 41\n              }, this), this.state.isLoading === false && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"botaoLogin\",\n                type: \"submit\",\n                disabled: this.state.email === '' || this.state.senha === '' ? 'none' : '',\n                children: \"Entrar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["D:/Senai/SPMG-HTML/SPMG-FrontEnd/React-SPMG/spmg/src/Login/login.js"],"names":["Component","axios","parseJwt","Cabecalho","findByTestId","Login","constructor","props","efetuarLogin","event","preventDefault","setState","erroMensagem","isLoading","fetch","method","body","JSON","stringify","email","state","senha","headers","then","resposta","status","localStorage","setItem","data","token","role","history","push","catch","attCampos","campo","target","name","value","render","color","textAlign"],"mappings":"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","sourcesContent":["import { Component } from 'react';\r\nimport axios from \"axios\";\r\nimport '../style/css/style.css';\r\nimport { parseJwt } from '../services/auth'\r\n\r\nimport Cabecalho from '../Cabecalho/cabecalho'\r\nimport { findByTestId } from '@testing-library/dom';\r\n\r\nclass Login extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            // email : 'adm@gmail.com',\r\n            // senha : 'adm123',\r\n            // email : 'helena.souza@spmedicalgroup.com.br',\r\n            // senha : 'HelenaS123',\r\n            email : 'fernando@gmail.com',\r\n            senha : 'Fernando123',\r\n            erroMensagem : '',\r\n            isLoading : false\r\n        }\r\n    }\r\n\r\n    efetuarLogin = (event) => {\r\n\r\n        event.preventDefault();\r\n\r\n        this.setState({ erroMensagem : '', isLoading : true })\r\n\r\n        fetch('http://localhost:5000/api/Login', {\r\n            method : 'POST',\r\n\r\n            body : JSON.stringify({\r\n                email : this.state.email,\r\n                senha : this.state.senha\r\n            }),\r\n            \r\n            headers : {\r\n                \"Content-Type\" : \"application/json\"\r\n            },\r\n        })\r\n        .then(resposta => {\r\n            if (resposta.status === 200) {\r\n                localStorage.setItem('usuario-token', resposta.data.token);\r\n                this.setState({ isLoading : false })\r\n\r\n                \r\n                switch (parseJwt().role) {\r\n                    case '1':\r\n                        this.props.history.push('/Adm')\r\n                    break;\r\n                    case '2':\r\n                        this.props.history.push('/Medicos')\r\n                    break;\r\n                    case '3':\r\n                        this.props.history.push('/Prontuario')\r\n                    break;\r\n                \r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        })\r\n        .catch(() => {\r\n            this.setState({ erroMensagem : 'Email ou senha incorretos', isLoading: false})\r\n        })\r\n    }\r\n\r\n\r\n    attCampos = (campo) => {\r\n        this.setState({[campo.target.name] : campo.target.value })\r\n    }\r\n \r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <Cabecalho/>\r\n                    <div className=\"container\">\r\n                        <div className=\"alinhemantoLogin\">\r\n                            <h2>Login</h2>\r\n                        </div>\r\n                        <div className=\"campo\">\r\n                            <form onSubmit={this.efetuarLogin}>\r\n                                <div className=\"alinharCampo\">\r\n                                    <div className=\"alinharP\">\r\n                                        <p>Email</p>\r\n                                    </div>\r\n                                    <input\r\n                                        className=\"digitar email\"\r\n                                        name=\"email\"\r\n                                        onChange={this.attCampos}\r\n                                        value={this.state.email}\r\n                                        required\r\n                                        type=\"email\"\r\n                                    />\r\n                                    <div className=\"alinharP\">\r\n                                        <p>Senha</p>\r\n                                    </div>\r\n                                    <input\r\n                                        className=\"digitar senha\"\r\n                                        name=\"senha\"\r\n                                        onChange={this.attCampos}\r\n                                        value={this.state.senha}\r\n                                        required\r\n                                        type=\"password\"\r\n                                    />\r\n\r\n                                    <p style={{ color : 'red', textAlign : 'center'}} >{this.state.erroMensagem}</p>\r\n\r\n                                    {\r\n                                        this.state.isLoading === true &&\r\n                                        <button\r\n                                            type=\"submit\" \r\n                                            className=\"botaoLogin\" \r\n                                            disabled\r\n                                            >Loading...</button>\r\n                                    }\r\n\r\n                                    {\r\n                                        this.state.isLoading === false &&\r\n                                        <button                                        \r\n                                            className=\"botaoLogin\"\r\n                                            type=\"submit\"\r\n                                            disabled={ this.state.email === '' || this.state.senha === '' ? 'none' : '' }\r\n                                        >\r\n                                            Entrar</button>\r\n                                    }\r\n\r\n                                </div>\r\n                            </form>   \r\n                        </div>\r\n                    </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Login"]},"metadata":{},"sourceType":"module"}